<app-header title="Entra in Lega" (back)="goBack()" (logout)="logout()"></app-header>

<main class="main-content">
	<div *ngIf="isLoading" class="loading-container">
		<mat-spinner></mat-spinner>
		<p>Caricamento informazioni lega...</p>
	</div>

	<div *ngIf="error" class="error-container">
		<mat-card>
			<mat-card-content>
				<div class="error-message">
					<mat-icon color="warn">error</mat-icon>
					<p>{{ error }}</p>
				</div>
			</mat-card-content>
		</mat-card>
	</div>

	<div *ngIf="!isLoading && !error && lega" class="lega-info-container">
		<mat-card class="lega-card">
			<mat-card-header>
				<mat-card-title>{{ lega.nome }}</mat-card-title>
			</mat-card-header>
			<mat-card-content>
				<div class="lega-details">
					<div class="detail-row">
						<span class="label">Sport:</span>
						<span class="value">{{ lega.campionato?.sport?.nome }}</span>
					</div>
					<div class="detail-row">
						<span class="label">Campionato:</span>
						<span class="value">{{ lega.campionato!.nome}}</span>
					</div>
					<div class="detail-row">
						<span class="label">Giornata iniziale:</span>
						<span class="value">{{ lega.giornataIniziale }}</span>
					</div>
					<div class="detail-row">
						<span class="label">Iscritti:</span>
						<span class="value">{{ lega.giocatori?.length || 0 }}</span>
					</div>
				</div>
			</mat-card-content>
			<mat-card-actions align="end">
				<button mat-raised-button color="primary" (click)="confermaJoin()">
					<mat-icon>{{ getGiocaIcon(lega.campionato!.sport!.id) }}</mat-icon>
					Entra nella lega
				</button>
			</mat-card-actions>
		</mat-card>
	</div>
</main>
